;/*FB_PKG_DELIM*/

__d("MWChatMediaRootQuery.graphql",["MWChatMediaRootQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"after"},c={defaultValue:null,kind:"LocalArgument",name:"before"},d={defaultValue:null,kind:"LocalArgument",name:"first"},e={defaultValue:null,kind:"LocalArgument",name:"last"},f={defaultValue:null,kind:"LocalArgument",name:"messageID"},g={defaultValue:null,kind:"LocalArgument",name:"scale"},h={defaultValue:null,kind:"LocalArgument",name:"threadID"},i=[{kind:"Variable",name:"id",variableName:"threadID"}],j={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"folder",storageKey:null},l=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Literal",name:"ascending",value:!0},{kind:"Variable",name:"before",variableName:"before"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"last",variableName:"last"},{kind:"Variable",name:"message_id",variableName:"messageID"},{kind:"Literal",name:"message_shared_media_type",value:"PHOTO_VIDEO_AND_GIF"}],m={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},t=[q,r,s,{alias:null,args:null,kind:"ScalarField",name:"downloadable_uri",storageKey:null}];q={alias:"image_thumb",args:[{kind:"Literal",name:"height",value:250},{kind:"Literal",name:"width",value:250}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[q,r,s],storageKey:"image(height:250,width:250)"};r={kind:"InlineFragment",selections:[p,{alias:null,args:null,kind:"ScalarField",name:"blurred_image_uri",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:2048},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:2048}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:t,storageKey:null},q],type:"MessageImage",abstractKey:null};s={kind:"InlineFragment",selections:[p,{alias:"sdUrl",args:[{kind:"Literal",name:"quality",value:"SD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"SD")'},{alias:"hdUrl",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},q,{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"MessageVideo",abstractKey:null};p={kind:"InlineFragment",selections:[p,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:t,storageKey:null},q,{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null}],type:"MessageAnimatedImage",abstractKey:null};t={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null};q={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"MWChatMediaRootQuery",selections:[{alias:null,args:i,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[j,k,{alias:null,args:l,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[m,j,n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[o,r,s,p],storageKey:null}],type:"UserMessage",abstractKey:null}],storageKey:null},t],storageKey:null},q],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[h,f,a,d,c,e,g],kind:"Operation",name:"MWChatMediaRootQuery",selections:[{alias:null,args:i,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[j,k,{alias:null,args:l,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[o,j,{kind:"InlineFragment",selections:[m,n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[o,r,s,p,{kind:"InlineFragment",selections:[j],type:"Node",abstractKey:"__isNode"}],storageKey:null}],type:"UserMessage",abstractKey:null}],storageKey:null},t],storageKey:null},q],storageKey:null}],storageKey:null}]},params:{id:b("MWChatMediaRootQuery_facebookRelayOperation"),metadata:{},name:"MWChatMediaRootQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometPhotoViewerImageSuspense",["Promise","PromiseAnnotate","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l=document.body,m=typeof jest==="undefined"&&document!==void 0&&typeof document.createElement==="function";function n(a){return new(h||(h=b("Promise")))(function(b){if(!m||l==null)return b();var c=document.createElement("img");c.onload=c.onerror=b;c.src=a})}var o=new Map(),p=2e3,q={get:function(a){var b=o.get(a);if(b!=null){o["delete"](a);o.set(a,b);return b}},set:function(a,b){o["delete"](a);o.set(a,b);if(o.size>p){a=o.keys().next();a.done||o["delete"](a.value)}}};function r(a){if(a==null)return;var b=q.get(a);if(b!=null)if(b.pending===!0)throw b.promise;else return;else{b=n(a);(i||(i=d("PromiseAnnotate"))).setDisplayName(b,"SuspenseImage");var c={pending:!0,promise:b};b.then(function(){c.pending===!0&&(c.pending=!1)});q.set(a,c);throw b}}a=k.forwardRef(function(a,b){r(a.src);return k.jsx("img",babelHelpers["extends"]({},a,{ref:b}))});g["default"]=a}),98);
__d("CometPhotoViewerInnerWrapper.react",["CometRouteRenderType","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={backgroundContainer:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",minHeight:"x1xoerdy",$$css:!0},backgroundContainerDialog:{height:"x1dr59a3",$$css:!0},backgroundContainerDialogWithFooter:{height:"x4uq5q4",$$css:!0},backgroundContainerTabs:{height:"xtp0wl1",$$css:!0},backgroundContainerTabsWithFooter:{height:"xossbfl",$$css:!0},image:{height:"xt7dq6l",maxWidth:"x193iq5w",width:"x14atkfc",$$css:!0},maxImageHeightDialog:{maxHeight:"x1bwycvy",$$css:!0},maxImageHeightDialogWithFooter:{maxHeight:"x4ju7c5",$$css:!0},maxImageHeightTabs:{maxHeight:"x85a59c",$$css:!0},maxImageHeightTabsWithFooter:{maxHeight:"x1wlxzsl",$$css:!0},passthroughImage:{backgroundPosition:"x1lvsgvq",backgroundRepeat:"xiy17q3",backgroundSize:"x1tbiz1a",height:"x5yr21d",width:"xh8yej3",$$css:!0},photoWrapper:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",maxHeight:"xmz0i5r",position:"x1n2onr6",$$css:!0},photoWrapperPlaceholder:{height:"x5yr21d",width:"xh8yej3",$$css:!0},placeholderContainer:{width:"xh8yej3",$$css:!0}};function l(a,b){a===void 0&&(a=!1);b===void 0&&(b=!1);var e=d("CometRouteRenderType").useIsPushView();return(h||(h=c("stylex")))(k.backgroundContainer,!a&&e&&k.backgroundContainerDialog,!a&&!e&&k.backgroundContainerTabs,a&&e&&k.backgroundContainerDialogWithFooter,a&&!e&&k.backgroundContainerTabsWithFooter,b&&k.placeholderContainer)}function m(a,b){var e=d("CometRouteRenderType").useIsPushView();return(h||(h=c("stylex")))(!a&&e&&k.maxImageHeightDialog,!a&&!e&&k.maxImageHeightTabs,a&&e&&k.maxImageHeightDialogWithFooter,a&&!e&&k.maxImageHeightTabsWithFooter,b&&k.passthroughImage,!b&&k.image)}function n(a,b){var c=d("CometRouteRenderType").useIsPushView();return[!a&&c&&k.maxImageHeightDialog,!a&&!c&&k.maxImageHeightTabs,a&&c&&k.maxImageHeightDialogWithFooter,a&&!c&&k.maxImageHeightTabsWithFooter,b&&k.passthroughImage,!b&&k.image]}function a(a,b){var c=a.height,d=a.imageUri,e=a.showPlaceholderImage;e=e===void 0?!0:e;var f=a.width;a=a.withFooter;a=a===void 0?!1:a;a=m(a,!0);var g=l(!1,!0);return j.jsx("div",{className:g,ref:(g=b)!=null?g:null,children:d!=null&&e&&j.jsx("div",{className:"x6s0dn4 x78zum5 xl56j7k xmz0i5r x1n2onr6 x5yr21d xh8yej3",children:j.jsx("div",{className:a,style:c!=null&&f!=null?{backgroundImage:"url("+d+")",maxHeight:c,maxWidth:f}:{backgroundImage:"url("+d+")"}},d)})})}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){var c=a.imageComponent,d=a.imageComponentWithXStyle;a=a.withFooter;a=a===void 0?!1:a;var e=m(a,!1);a=n(a,!1);return j.jsx("div",{className:"x6s0dn4 x78zum5 xl56j7k xmz0i5r x1n2onr6",ref:b,children:c!=null?c(e):d!=null?d(a):null})}b.displayName=b.name+" [from "+f.id+"]";e=j.forwardRef(b);f=j.forwardRef(a);g.useCometPhotoViewerContainerStyles=l;g.CometPhotoViewerImageWrapper=e;g.CometPhotoViewerPlaceholderWrapper=f}),98);
__d("MWChatMediaData",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){return a==null||a.__typename!=="MessageVideo"||a.sdUrl==null||a.image_thumb==null||a.image_thumb.uri==null||a.image_thumb.width==null||a.image_thumb.height==null||a.original_dimensions==null||a.original_dimensions.x==null||a.original_dimensions.y==null?null:{hdUrl:a.hdUrl,imageThumb:{height:a.image_thumb.height,uri:a.image_thumb.uri,width:a.image_thumb.width},legacyAttachmentID:a.legacy_attachment_id,originalDimensions:{x:a.original_dimensions.x,y:a.original_dimensions.y},sdUrl:a.sdUrl}},h=function(a){return a==null||a.__typename!=="MessageImage"||a.image==null||a.image.uri==null||a.image.width==null||a.image.height==null||a.image_thumb==null||a.image_thumb.uri==null||a.image_thumb.width==null||a.image_thumb.height==null?null:{blurredImageUri:a.blurred_image_uri,image:{downloadableUri:a.image.downloadable_uri,height:a.image.height,uri:a.image.uri,width:a.image.width},imageThumb:{height:a.image_thumb.height,uri:a.image_thumb.uri,width:a.image_thumb.width},legacyAttachmentID:a.legacy_attachment_id}},i=function(a){return a==null||a.__typename!=="MessageAnimatedImage"||a.image==null||a.image.uri==null||a.image.width==null||a.image.height==null||a.image_thumb==null||a.image_thumb.uri==null||a.image_thumb.width==null||a.image_thumb.height==null?null:{blurredImageUri:null,image:{downloadableUri:a.image.downloadable_uri,height:a.image.height,uri:a.image.uri,width:a.image.width},imageThumb:{height:a.image_thumb.height,uri:a.image_thumb.uri,width:a.image_thumb.width},legacyAttachmentID:a.legacy_attachment_id}};a=function(a){return a.reduce(function(a,b){if(b==null||b.node==null||b.node.id==null||b.node.message_id==null||b.node.blob_attachments==null||b.cursor==null)return a;var c=b.node,d=c.blob_attachments,e=c.id,f=c.message_id,j=c.timestamp_precise,k=b.cursor;c=d.map(function(a){if(a.__typename==="MessageImage"){var b=h(a);return b==null?null:{__typename:"MessageImage",attachment:b,cursor:k,messageID:f,nodeID:e,timestamp:j}}else if(a.__typename==="MessageVideo"){b=g(a);return b==null?null:{__typename:"MessageVideo",attachment:b,cursor:k,messageID:f,nodeID:e,timestamp:j}}else if(a.__typename==="MessageAnimatedImage"){b=i(a);return b==null?null:{__typename:"MessageAnimatedImage",attachment:b,cursor:k,messageID:f,nodeID:e,timestamp:j}}else return null}).filter(Boolean);return a.concat(c)},[]).filter(Boolean)};f.normalizeMessages=a}),66);
__d("MWChatMediaReducer",[],(function(a,b,c,d,e,f){"use strict";a={curIdx:0,hasNextPage:!1,hasPrevPage:!1,initialCursor:null,isFetchingNextPage:!1,isFetchingPrevPage:!1,mediaList:[]};b=function(a,b){switch(b.type){case"initialize":return babelHelpers["extends"]({},a,{curIdx:b.curIdx,initialCursor:b.initialCursor,mediaList:b.mediaList});case"startFetchingNextPage":return babelHelpers["extends"]({},a,{isFetchingNextPage:!0});case"startFetchingPrevPage":return babelHelpers["extends"]({},a,{isFetchingPrevPage:!0});case"prevPageReceived":return babelHelpers["extends"]({},a,{curIdx:a.curIdx+b.medias.length,hasPrevPage:b.hasPrevPage,isFetchingPrevPage:!1,mediaList:b.medias.concat(a.mediaList)});case"nextPageReceived":return babelHelpers["extends"]({},a,{hasNextPage:b.hasNextPage,isFetchingNextPage:!1,mediaList:a.mediaList.concat(b.medias)});case"messageDeleted":return babelHelpers["extends"]({},a,{curIdx:Math.min(Math.max(b.curIdx,0),a.mediaList.length-1),mediaList:b.mediaList});case"viewMediaAtIndex":return babelHelpers["extends"]({},a,{curIdx:Math.min(Math.max(b.curIdx,0),a.mediaList.length-1)});default:return a}};f.initialState=a;f.reducer=b}),66);
__d("MWChatDeleteMessageEventEmitter",["BaseEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";var h="deleteMessage",i=new(c("BaseEventEmitter"))();function a(a){i.emit(h,a)}function b(a){var b=i.addListener(h,a);return function(){return b.remove()}}g.emit=a;g.subscribe=b}),98);
__d("MWChatMediaUtil",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM)return;a.forEach(function(a){if(typeof a==="string"){var b=new Image();b.src=a}})};g.prefetchImages=a}),98);
__d("MWChatMediaViewerImage.react",["fbt","CometHero.react","CometPagelet.react","CometPhotoViewerImageSuspense","CometPhotoViewerInnerWrapper.react","MWXPressable.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useState,l=h._("__JHASH__SUN00vbyQRp__JHASH__");function a(a){var b=a.blurredImageURI,e=a.imageURI,f=a.origHeight,g=a.origSrc;a=a.origWidth;var i=k(!1),m=i[0],n=i[1];i=d("CometPhotoViewerInnerWrapper.react").useCometPhotoViewerContainerStyles(!0);return j.jsx("div",{"data-testid":void 0,children:j.jsxs(d("CometPagelet.react").Placeholder,{className:i,fallback:g!=null?j.jsx(d("CometPhotoViewerInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,{height:f,imageUri:g,showPlaceholderImage:g!=null&&a!=null&&f!=null,width:a,withFooter:!0}):null,name:"MessengerMediaViewerPhoto",pageletType:"media",children:[j.jsx(c("CometHero.react"),{description:"MWChatMediaViewerImage"}),b==null||m?j.jsx(d("CometPhotoViewerInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponent:function(a){return j.jsx(c("CometPhotoViewerImageSuspense"),{alt:l,className:a,src:e},e)},withFooter:!0}):j.jsx(c("MWXPressable.react"),{display:"inline",label:h._("__JHASH__jjpvSNJ1g5C__JHASH__"),onPress:function(){return n(!0)},children:j.jsx(d("CometPhotoViewerInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponent:function(a){return j.jsx(c("CometPhotoViewerImageSuspense"),{alt:l,className:a,src:b},b)},withFooter:!0})})]},e)})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatMediaViewerNavigationTapTarget.react",["ix","CometSkittleIcon.react","CometTrackingNodeProvider.react","MWXPressable.react","fbicon","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={buttonContainerBackground:{backgroundColor:"xiwuv7k",$$css:!0},buttonContainerHoverLeft:{opacity:"x1hc1fzr",transform:"xs51lif",$$css:!0},buttonContainerHoverRight:{opacity:"x1hc1fzr",transform:"xzycz3q",$$css:!0},fullHeight:{height:"x5yr21d",$$css:!0},invisible:{opacity:"xg01cxk",transitionDuration:"xhb22t3",transitionTimingFunction:"xls3em1",visibility:"xlshs6z",$$css:!0},navButton:{alignItems:"x6s0dn4",display:"x78zum5",opacity:"x197sbye",paddingTop:"xyamay9",paddingEnd:"x1pi30zi",paddingBottom:"x1l90r2v",paddingStart:"x1swvt13",position:"x1n2onr6",transitionDuration:"x1k90msu",transitionProperty:"x6o7n8i",transitionTimingFunction:"x9lcvmn",willChange:"x6my1t9",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",opacity:"x1hc1fzr",position:"x1n2onr6",transitionDuration:"x1ebt8du",transitionProperty:"x1jl3cmp",transitionTimingFunction:"x1dhq9h",willChange:"xfwg19i",zIndex:"x1vjfegm",$$css:!0},tapTargetOverlay:{height:"x5yr21d",$$css:!0}};function a(a){var b=a.direction,e=a.disable,f=e===void 0?!1:e;e=a.invisible;e=e===void 0?!1:e;var g=a.label,j=a.onClick,m=a.testid;m=a.trackingNode;a=k.jsx(c("MWXPressable.react"),{"aria-label":g,focusable:!1,onPress:j,testid:void 0,xstyle:l.tapTargetOverlay,children:function(a){a=a.hovered;return k.jsx("div",{className:(i||(i=c("stylex")))(l.navButton,l.buttonContainerBackground,a&&(b==="previous"?l.buttonContainerHoverLeft:l.buttonContainerHoverRight)),children:k.jsx(c("CometSkittleIcon.react"),{color:"gray",disabled:f,icon:b==="previous"?d("fbicon")._(h("492491"),24):d("fbicon")._(h("492539"),24),size:48})})}});return k.jsx("div",{className:(i||(i=c("stylex")))(l.root,e&&l.invisible,l.fullHeight),children:m!=null?k.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:m,children:a}):a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatMediaViewerStage.react",["fbt","CometBlurredBackgroundImage.react","CometGlobalPanelLayoutContext","CometKeys","CometMediaViewerFilmstrip.react","CurrentEnvironment","Locale","MWChatMediaViewerNavigationTapTarget.react","MWXLink.react","MessengerBlurpleLogoSvg.react","XMessengerDotComCometRootControllerRouteBuilder","deferredLoadComponent","gkx","react","requireDeferred","stylex","useCometRouterDispatcher","useDebouncedComet","useIsReadOnlyFeatureLimitedWithThreadType","useLayerKeyCommands","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useMemo,n=b.useRef,o=b.useState,p=c("deferredLoadComponent")(c("requireDeferred")("MWChatMediaViewerControls.react").__setRef("MWChatMediaViewerStage.react")),q={blurredBackground:{bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,opacity:"xuzhngd",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},containerPadding:{paddingEnd:"xvj1nn1",paddingLeft:null,paddingRight:null,paddingStart:"x1nd34w2",$$css:!0},easyExit:{bottom:"x1ey2m1c",boxSizing:"x9f619",end:"xds687c",left:null,right:null,position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},footer:{maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},gradientProtection:{backgroundImage:"x1f90px3",height:"x1ffmiix",position:"x10l6tqk",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},headerContainer:{alignItems:"x6s0dn4",display:"x78zum5",end:"xbruw4w",left:null,right:null,height:"x1s65kcs",position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0},headerContainerWithGlobalPanel:{height:"xnnlda6",$$css:!0},logoContainer:{position:"x10l6tqk",start:"x16q8cke",left:null,right:null,top:"xomnu4r",zIndex:"x1n327nk",$$css:!0},mediaContainer:{boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1iyjqo2",height:"x5yr21d",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"xh8yej3",$$css:!0},messengerDotComHeaderContainerHeight:{end:"xds687c",left:null,right:null,height:"xnnlda6",$$css:!0},navButtonContainer:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",end:"xds687c",left:null,right:null,justifyContent:"x1qughib",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",zIndex:"x1ja2u2z",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"xal61yo",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",height:"x5yr21d",minWidth:"x17upfok",position:"x1n2onr6",userSelect:"x87ps6o",":focus_outline":"x1uvtmcs",$$css:!0},workplaceHeaderContainer:{end:"xlr8s2x",left:null,right:null,height:"xng8ra",zIndex:"xhtitgo",$$css:!0},workroomsHeaderContainer:{end:"xlr8s2x",left:null,right:null,height:"xng8ra",zIndex:"xhtitgo",$$css:!0}},r=2e3,s=c("gkx")("1299319");function a(a){var b=a.activeIndex,e=a.attachmentID,f=a.backgroundSrc,g=a.children,j=a.disableNextButton,t=a.disablePrevButton,u=a.downloadLink,v=a.hideNextButton,w=a.hidePrevButton,x=a.isForwardEnabledForThread,y=a.messageID,z=a.setActiveIndex,A=a.showMessengerLink,B=l(c("CometGlobalPanelLayoutContext")),C=c("CurrentEnvironment").messengerdotcom,D=c("gkx")("1224637"),E=c("gkx")("7278"),F=c("useIsReadOnlyFeatureLimitedWithThreadType")(null);F=c("gkx")("1844772")&&!F&&x;var G=h._("__JHASH__LwpPfoJWBJ-__JHASH__"),H=h._("__JHASH__37s-bUHecpV__JHASH__"),I=n(!0);x=o(!1);var J=x[0],K=x[1],L=n(null),M=c("useCometRouterDispatcher")();x=function(){return N.isPending()?O():N()};var N=c("useDebouncedComet")(function(){K(!1),O()},{leading:!0,wait:r}),O=c("useDebouncedComet")(function(){K(!0),I.current=!1},{leading:!1,wait:r});c("useLayoutEffect_SAFE_FOR_SSR")(function(){O(),L.current&&I.current&&L.current.focus()});var P=function(){M!=null&&M.popPushView()},Q=m(function(){var b=[];!w&&!t&&b.push({command:{key:c("CometKeys").LEFT},description:G,handler:function(){return z(a.activeIndex-1)}});!v&&!j&&b.push({command:{key:c("CometKeys").RIGHT},description:H,handler:function(){return z(a.activeIndex+1)}});return b},[j,t,v,w,H,G,a.activeIndex,z]),R=k.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:d("Locale").isRTL()?"next":"previous",disable:t,invisible:w||J,label:G,onClick:function(){return z(b-1)},testid:void 0,trackingNode:143});J=k.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:d("Locale").isRTL()?"previous":"next",disable:j,invisible:v||J,label:H,onClick:function(){return z(b+1)},testid:void 0,trackingNode:142});c("useLayerKeyCommands")(Q);return k.jsxs("div",{className:"x6s0dn4 xal61yo x78zum5 xdt5ytf x1iyjqo2 x5yr21d x17upfok x1n2onr6 x87ps6o x1uvtmcs","data-testid":void 0,onMouseMove:x,ref:L,tabIndex:"0",children:[A&&k.jsx("div",{className:"x10l6tqk x16q8cke xomnu4r x1n327nk",children:k.jsx(c("MWXLink.react"),{"aria-label":"Messenger",href:c("XMessengerDotComCometRootControllerRouteBuilder").buildURL({}),children:k.jsx(c("MessengerBlurpleLogoSvg.react"),{height:"40",width:"40"})})}),k.jsx("div",{className:"x1f90px3 x1ffmiix x10l6tqk xh8yej3 x1vjfegm"}),k.jsx("div",{className:"x1ey2m1c xds687c xuzhngd x10l6tqk x17qophe x13vifvy",children:f!=null?k.jsx(c("CometBlurredBackgroundImage.react"),{src:f}):null}),k.jsxs("div",{className:"x9f619 x78zum5 x1iyjqo2 x5yr21d xl56j7k x6ikm8r x10wlt62 x1n2onr6 xh8yej3 xvj1nn1 x1nd34w2",children:[e!=null&&y!=null?k.jsx("div",{className:(i||(i=c("stylex")))(q.headerContainer,B&&q.headerContainerWithGlobalPanel,C&&q.messengerDotComHeaderContainerHeight,D&&q.workplaceHeaderContainer,E&&q.workroomsHeaderContainer),children:k.jsx(p,{attachmentID:e,canForward:F,downloadLink:u,messageID:y})}):null,k.jsxs("div",{className:"x6s0dn4 x1ey2m1c x78zum5 xds687c x1qughib x10l6tqk x17qophe x13vifvy x1ja2u2z",children:[!s&&k.jsx("div",{"aria-hidden":!0,className:"x1ey2m1c x9f619 xds687c x10l6tqk x17qophe x13vifvy","data-testid":void 0,onClick:P}),R,J]}),g]}),k.jsx("div",{className:"x193iq5w x6ikm8r x10wlt62",children:k.jsx(c("CometMediaViewerFilmstrip.react"),{activeIndex:b,images:a.thumbnails.map(function(a){return babelHelpers["extends"]({},a,{mediaType:"image"})}),onSetImage:z})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatMediaViewerVideo.react",["CometRouteRenderType","MWChatVideoPlayer.react","MWVideoPlayerControllerContext.react","react","stylex","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o={videoContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",minHeight:"x1xoerdy",width:"xh8yej3",$$css:!0},videoContainerDialog:{height:"x4uq5q4",$$css:!0},videoContainerTabs:{height:"x1ch8t6n",$$css:!0}};function p(a){var b=a.fbid,e=a.hdSrc,f=a.originalHeight,g=a.originalWidth;a=a.sdSrc;var i=d("CometRouteRenderType").useIsPushView(),m=c("useRoutePassthroughProps")(),p=(m==null?void 0:m.startTimestamp)!=null?Number(m.startTimestamp):void 0;m=(m==null?void 0:m.volumeSetting)!=null?Number(m.volumeSetting):void 0;var q=n(!1),r=k(c("MWVideoPlayerControllerContext.react")),s=r.ref.current;l(function(){s!==null&&!q.current&&(s.setMuted(!1,"product_initiated"),q.current=!0)},[s,q]);return j.jsx("div",{className:(h||(h=c("stylex")))(o.videoContainer,i&&o.videoContainerDialog,!i&&o.videoContainerTabs),children:j.jsx(c("MWChatVideoPlayer.react"),{controls:"default",fbid:b,hdSrc:e,initialForceHD:!0,originalHeight:f,originalWidth:g,sdSrc:a,startTimestamp:p,volumeSetting:m})})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=n(null),d=m(function(){return{ref:b}},[b]);return j.jsx(c("MWVideoPlayerControllerContext.react").Provider,{value:d,children:j.jsx(p,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatMediaRoot.react",["fbt","CometContentNotAvailable.react","CometErrorBoundary.react","CometErrorRoot.react","CometRelay","CometRouteParams","CometRouterPushViewStackContext","I64","LSMessagingThreadTypeUtil","MWChatDeleteMessageEventEmitter","MWChatMediaData","MWChatMediaReducer","MWChatMediaRootQuery.graphql","MWChatMediaUtil","MWChatMediaViewerImage.react","MWChatMediaViewerStage.react","MWChatMediaViewerVideo.react","MWChatMessageId","MWInboxInfoSharedContentQPLLogger","MWLSThread","WebPixelRatio","promiseDone","react","useIsMountedRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));e=j;var m=e.useCallback,n=e.useContext,o=e.useEffect,p=e.useReducer,q=e.useState,r=20,s=i!==void 0?i:i=b("MWChatMediaRootQuery.graphql");function t(a){var b,e=a.props;a=a.queries;var f=d("CometRelay").useRelayEnvironment(),g=d("CometRouteParams").useRouteParams();e.manualRouteParams!=null&&(g=e.manualRouteParams);var i=n(c("CometRouterPushViewStackContext"))||[];i=i.length===0&&e.routeProps.showMessengerLink;e=q(null);var j=e[0],t=e[1];e=p(d("MWChatMediaReducer").reducer,d("MWChatMediaReducer").initialState);var u=e[0],v=u.curIdx,w=u.hasNextPage,x=u.hasPrevPage,y=u.initialCursor,z=u.isFetchingNextPage,A=u.isFetchingPrevPage,B=u.mediaList,C=e[1],D=c("useIsMountedRef")(),E=d("CometRelay").usePreloadedQuery(s,a.messengerMediaRootQueryReference);if(j!==null)throw j;o(function(){var a;a=E==null?void 0:(a=E.message_thread)==null?void 0:(a=a.messages_with_attachments)==null?void 0:(a=a.edges[0])==null?void 0:a.cursor;if(a!=null&&y===null){var b;b=E==null?void 0:(b=E.message_thread)==null?void 0:(b=b.messages_with_attachments)==null?void 0:b.edges;if(b!=null){b=d("MWChatMediaData").normalizeMessages(b);var c=0;g.attachment_id!=null&&(c=b.findIndex(function(a){return a.attachment.legacyAttachmentID===g.attachment_id}));C({curIdx:c,initialCursor:a,mediaList:b,type:"initialize"})}}},[y,E,g.attachment_id]);var F=E==null?void 0:(u=E.message_thread)==null?void 0:u.id;a=E==null?void 0:(e=E.message_thread)==null?void 0:e.folder;o(function(){return d("MWChatDeleteMessageEventEmitter").subscribe(function(a){var b=v,c=B.filter(function(c,d){c=c.messageID===a;c&&(d<=v&&v>0&&b--);return!c});c.length!==B.length&&(F!=null&&f.commitUpdate(function(a){return(a=a.get(F))==null?void 0:a.invalidateRecord()}));C({curIdx:b,mediaList:c,type:"messageDeleted"})})},[f,F,v,B]);var G=m(function(a){C({type:"startFetchingPrevPage"});return d("CometRelay").fetchQuery(f,s,{before:a,last:r,scale:d("WebPixelRatio").get(),threadID:g.thread_id}).toPromise().then(function(a){var b;if(!D.current)return;a=a==null?void 0:(a=a.message_thread)==null?void 0:a.messages_with_attachments;b=d("MWChatMediaData").normalizeMessages((b=a==null?void 0:a.edges)!=null?b:[]);if(b.length>0){C({hasPrevPage:(a=a==null?void 0:(a=a.page_info)==null?void 0:a.has_previous_page)!=null?a:!1,medias:b,type:"prevPageReceived"})}})["catch"](function(a){if(!D.current)return;t(a)})},[f,D,g.thread_id]),H=m(function(a){C({type:"startFetchingNextPage"});return d("CometRelay").fetchQuery(f,s,{after:a,first:r,scale:d("WebPixelRatio").get(),threadID:g.thread_id}).toPromise().then(function(a){var b;if(!D.current)return;a=a==null?void 0:(a=a.message_thread)==null?void 0:a.messages_with_attachments;b=d("MWChatMediaData").normalizeMessages((b=a==null?void 0:a.edges)!=null?b:[]);if(b.length>0){C({hasNextPage:(a=a==null?void 0:(a=a.page_info)==null?void 0:a.has_next_page)!=null?a:!1,medias:b,type:"nextPageReceived"})}})["catch"](function(a){if(!D.current)return;t(a)})},[f,D,g.thread_id]);o(function(){y!=null&&(c("promiseDone")(H(y)),c("promiseDone")(G(y)))},[f,H,G,y,g.thread_id]);var I=(u=(j=B[0])==null?void 0:j.cursor)!=null?u:null,J=(j=(e=B[B.length-1])==null?void 0:e.cursor)!=null?j:null;o(function(){v<=r/2&&x&&!A&&I!=null?c("promiseDone")(G(I)):v>=B.length-r/2&&w&&!z&&J!=null&&c("promiseDone")(H(J))},[v,G,H,w,x,I,J,B.length,z,A]);u=B[v-1];e=B[v+1];var K=null,L=null;u!=null&&u.__typename==="MessageImage"&&(K=u.attachment.image.uri);e!=null&&e.__typename==="MessageImage"&&(L=e.attachment.image.uri);o(function(){d("MWChatMediaUtil").prefetchImages([K,L])},[K,L]);o(function(){d("MWInboxInfoSharedContentQPLLogger").logOpenContentViewer()},[]);j=B[v];u=typeof g.thread_id==="string"?(k||(k=d("I64"))).of_string(g.thread_id):null;e=d("MWLSThread").useThread(u,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)});if(y==null)return null;if(j==null)return l.jsx(c("CometContentNotAvailable.react"),{});u=B.map(function(a){var b=a.attachment.imageThumb,c=b.height,d=b.uri;b=b.width;return{alt:h._("__JHASH__SUN00vbyQRp__JHASH__"),height:c,key:(c=a.attachment.legacyAttachmentID)!=null?c:d,uri:d,width:b}}).filter(Boolean);return l.jsx(c("MWChatMediaViewerStage.react"),{activeIndex:v,attachmentID:j.attachment.legacyAttachmentID,backgroundSrc:j.__typename!=="MessageAnimatedImage"?j.attachment.imageThumb.uri:void 0,disableNextButton:z&&B[v+1]==null,disablePrevButton:A&&B[v-1]==null,downloadLink:j.__typename==="MessageVideo"?(b=j.attachment.hdUrl)!=null?b:j.attachment.sdUrl:j.attachment.image.downloadableUri,hideNextButton:!w&&B[v+1]==null,hidePrevButton:!x&&B[v-1]==null,isForwardEnabledForThread:a!=="COMMUNITY"&&a!=="E2EE_CUTOVER"&&!e,messageID:typeof g.thread_id==="string"&&j.timestamp!=null?d("MWChatMessageId").makeSent(g.thread_id,j.messageID,j.timestamp):null,setActiveIndex:function(a){return C({curIdx:a,type:"viewMediaAtIndex"})},showMessengerLink:i,thumbnails:u,children:j.__typename==="MessageVideo"?l.jsx(c("MWChatMediaViewerVideo.react"),{fbid:j.nodeID,hdSrc:j.attachment.hdUrl!=null?j.attachment.hdUrl:void 0,originalHeight:j.attachment.originalDimensions.x,originalWidth:j.attachment.originalDimensions.y,sdSrc:j.attachment.sdUrl}):j.__typename==="MessageImage"?l.jsx(c("MWChatMediaViewerImage.react"),{blurredImageURI:j.attachment.blurredImageUri,imageURI:j.attachment.image.uri}):j.__typename==="MessageAnimatedImage"?l.jsx(c("MWChatMediaViewerImage.react"),{blurredImageURI:null,imageURI:j.attachment.image.uri,origHeight:j.attachment.image.height,origWidth:j.attachment.image.width}):null})}t.displayName=t.name+" [from "+f.id+"]";function a(a){a=l.jsx(t,babelHelpers["extends"]({},a));return l.jsx(c("CometErrorBoundary.react"),{fallback:function(){return l.jsx(c("CometErrorRoot.react"),{})},children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);