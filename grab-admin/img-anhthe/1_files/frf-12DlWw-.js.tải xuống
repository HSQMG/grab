;/*FB_PKG_DELIM*/

__d("LSDeleteMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(12).fetch([[[a[0]]]]),function(c){return c.messageId===a[1]&&b.i64.eq(c.threadKey,a[0])}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSSetPinnedMessage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("pinned_message_state",a[3]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"set_pinned_message_search",c.i64.cast([0,751]),d[1],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.i64.eq(a[3],c.i64.cast([0,1]))?c.seq([function(b){return c.fe(c.db.table(205).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(b){return c.fe(c.ftr(c.db.table(205).fetch([[[a[0],a[1],a[2]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&b.messageId===a[1]&&c.i64.eq(b.pinnedTimestampMs,a[2])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(b){return c.db.table(205).add({threadKey:a[0],messageId:a[1],pinnedTimestampMs:a[2],authorityLevel:c.i64.cast([0,80])})}]):c.fe(c.db.table(205).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSOptimisticSetPinnedMessage",["LSIssueNewTaskWithExtraOperations","LSSetPinnedMessage"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(d){return c.i64.eq(a[3],c.i64.cast([0,2]))?c.sp(b("LSSetPinnedMessage"),a[0],a[1],a[2],c.i64.cast([0,1])):c.sp(b("LSSetPinnedMessage"),a[0],a[1],a[2],a[3])},function(e){return c.i64.eq(a[3],c.i64.cast([0,2]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[0].set("pinned_location",c.i64.cast([0,1])),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskWithExtraOperations"),["pin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,430]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f,c.i64.cast([0,0]))):c.i64.eq(a[3],c.i64.cast([0,1]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskWithExtraOperations"),["pin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,430]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f,c.i64.cast([0,0]))):c.i64.eq(a[3],c.i64.cast([0,0]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskWithExtraOperations"),["unpin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,431]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f,c.i64.cast([0,0]))):c.resolve(0)}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSOptimisticSetPinnedMessageStoredProcedure",["LSOptimisticSetPinnedMessage"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.messageId;d[2]=b.pinnedTimestampMs;d[3]=b.state;return c("LSOptimisticSetPinnedMessage").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSReportMessageInCommunityChannel",["LSIssueNewError","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),f).then(function(a){return d[7]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),f).then(function(a){return d[8]=a})},function(a){return c.sp(b("LSIssueNewError"),f,c.i64.cast([0,1545093]),d[7],d[8],f,f)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("message_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("thread_key"),d[2],d[5]=c.toJSON(d[2]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(d[4]),c.i64.cast([0,374]),d[5],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("CometFRXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6866348803414836"}),null);
__d("CometFRXQuery$Parameters",["CometFRXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometFRXQuery_facebookRelayOperation"),metadata:{},name:"CometFRXQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("AudioClipsBrowserBlockMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("73");b=d("FalcoLoggerInternal").create("audio_clips_browser_block_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsCancelledByUserFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("39");b=d("FalcoLoggerInternal").create("audio_clips_cancelled_by_user",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogNotnowMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("74");b=d("FalcoLoggerInternal").create("audio_clips_dialog_notnow_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogOkMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("75");b=d("FalcoLoggerInternal").create("audio_clips_dialog_ok_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsMicAccessCheckFailedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("76");b=d("FalcoLoggerInternal").create("audio_clips_mic_access_check_failed",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackPauseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("44");b=d("FalcoLoggerInternal").create("audio_clips_playback_pause",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackResumeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("45");b=d("FalcoLoggerInternal").create("audio_clips_playback_resume",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("47");b=d("FalcoLoggerInternal").create("audio_clips_playback_start",a);e=b;g["default"]=e}),98);
__d("AudioClipsStartRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("51");b=d("FalcoLoggerInternal").create("audio_clips_start_recording_click",a);e=b;g["default"]=e}),98);
__d("AudioClipsStopRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("52");b=d("FalcoLoggerInternal").create("audio_clips_stop_recording_click",a);e=b;g["default"]=e}),98);
__d("Ls1lcFeatureOpenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("153");b=d("FalcoLoggerInternal").create("ls_1lc_feature_open",a);e=b;g["default"]=e}),98);
__d("MWChatAudioLog",["AudioClipsBrowserBlockMicAccessFalcoEvent","AudioClipsCancelledByUserFalcoEvent","AudioClipsDialogNotnowMicAccessFalcoEvent","AudioClipsDialogOkMicAccessFalcoEvent","AudioClipsMicAccessCheckFailedFalcoEvent","AudioClipsPlaybackPauseFalcoEvent","AudioClipsPlaybackResumeFalcoEvent","AudioClipsPlaybackStartFalcoEvent","AudioClipsStartRecordingClickFalcoEvent","AudioClipsStopRecordingClickFalcoEvent","I64","Ls1lcFeatureOpenFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){c("AudioClipsStopRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:"true",position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function b(){c("AudioClipsStartRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}}),c("Ls1lcFeatureOpenFalcoEvent").log(function(){return{extra:void 0,feature:13,feature_sessionid:void 0,screen_orientation:void 0,stage:7,thread:void 0}})}function e(){c("AudioClipsCancelledByUserFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function f(){c("AudioClipsBrowserBlockMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function i(a){c("AudioClipsPlaybackStartFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function j(a,b){c("AudioClipsPlaybackPauseFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function k(a,b){c("AudioClipsPlaybackResumeFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function l(){c("AudioClipsDialogOkMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function m(){c("AudioClipsDialogNotnowMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function n(){c("AudioClipsMicAccessCheckFailedFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}g.logClickStopRecording=a;g.logClickStartRecording=b;g.logDeleteRecording=e;g.logBrowserDenyAccess=f;g.logPlaybackStart=i;g.logPlaybackPause=j;g.logPlaybackResume=k;g.logDialogOk=l;g.logDialogNotNow=m;g.logMicAccessCheckFailed=n}),98);
__d("MWEncryptedBackupsIssueRangeQuery",["I64","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","MAWEncryptedBackupUtils","MAWJidUtils","MAWUIThreadCache","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,f,g,k){if(c("gkx")("7110")){c("promiseDone")(d("MAWEncryptedBackupUtils").getBackupTenancy(a).then(function(l){if(l!=null&&(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION)))return d("MAWUIThreadCache").getThreadJidByChatId({threadId:e}).then(function(e){if(e==null)return(h||(h=b("Promise"))).resolve();else return a.runInTransaction(function(a){return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),{isPointQuery:!1,newerNumMessages:k,numMessages:g,startSortKey:(i||(i=d("I64"))).to_string(f),threadId:d("MAWJidUtils").threadIdForChatJid(e)})},"readwrite")});else return(h||(h=b("Promise"))).resolve()}));return}}g.runQuery=a}),98);
__d("MWCMCreateSubthreadMenuItem.react",["fbt","I64","Int64Hooks","LsFalcoEventEntryPoint","MWXMenuItem.react","react","requireDeferred","useMWCMCreateSubthread","useOpenSubthreadView"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react"),l=c("requireDeferred")("LsMessageActionFalcoEvent").__setRef("MWCMCreateSubthreadMenuItem.react"),m=h._("__JHASH__BJS3T2_tOPf__JHASH__"),n=h._("__JHASH__ZHBRqixJ9Qy__JHASH__");function a(a){var b=a.message;a=c("useMWCMCreateSubthread")(b);var e=a[0];a=a[1];var f=c("useOpenSubthreadView")(),g=b.subthreadKey,h=d("Int64Hooks").useCallbackInt64(function(){l.onReady(function(a){return a.log(function(){var a={};return{action:{container_module:"MWCMCreateSubthreadMenuItem",type:g!=null?105:104},error:{message:void 0},extra:a,message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:b.messageId,recipient_id:void 0},thread:{group_size:(j||(j=d("I64"))).to_string(j.zero),id:j.to_string(b.threadKey),type:18}}})}),g!=null?f(g):e()},[b.messageId,b.threadKey,e,f,g]);return k.jsx(c("MWXMenuItem.react"),{"aria-label":g!=null?n:m,disabled:a,onClick:h,primaryText:g!=null?n:m})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatMessageBothOrientationFocusGroup.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","FocusGroup.react","emptyFunction","focusScopeQueries","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");b=d("FocusGroup.react").createFocusGroup(d("focusScopeQueries").tabbableScopeQuery);e=b[0];d=b[1];b={key:c("CometKeys").UP};var k={key:c("CometKeys").DOWN},l={key:c("CometKeys").LEFT},m={key:c("CometKeys").RIGHT},n=[{command:b,description:h._("__JHASH__HYvhkJNYo2M__JHASH__"),handler:c("emptyFunction")},{command:k,description:h._("__JHASH__6tFY25IlnV4__JHASH__"),handler:c("emptyFunction")},{command:l,description:h._("__JHASH__6tFY25IlnV4__JHASH__"),handler:c("emptyFunction")},{command:m,description:h._("__JHASH__HYvhkJNYo2M__JHASH__"),handler:c("emptyFunction")}];function a(a){a=a.children;return j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:n,xstyle:!1,children:a})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.FocusGroup=e;g.FocusGroupItem=d;g.keyCommands=b}),98);
__d("useMWLSMessageReportingToken",["I64","Int64Hooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("Int64Hooks").useMemoInt64(function(){return window.btoa("message_thread:"+(h||(h=d("I64"))).to_string(b)+":"+a)},[a,b])}g["default"]=a}),98);
__d("cometMessengerFileUploadComposerPluginSupportedTypes",[],(function(a,b,c,d,e,f){"use strict";a=["photo","video","file"];b=a;f["default"]=b}),66);
__d("useCometMessengerFileUploadPaste",["react","useCometLexicalFileDragAndDrop"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.editor,d=a.handlePastedFiles;a=a.isMimeTypeAcceptable;var e=i(function(a){a.length>0&&d(a)},[d]);c("useCometLexicalFileDragAndDrop")({editor:b,isMimeTypeAcceptable:a,onSubmit:e})}g["default"]=a}),98);
__d("CometMessengerHandlePastedFileComposerPlugin",["cometIsMimeTypeForMedia","cometMessengerFileUploadComposerPluginSupportedTypes","useCometMessengerFileUploadPaste"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a.kind!=="file")return!1;for(var b=c("cometMessengerFileUploadComposerPluginSupportedTypes"),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;switch(g){case"photo":if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type))return!0;break;case"video":if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return!0;break;case"file":if(d("cometIsMimeTypeForMedia").isMimeTypeForFile(a.type))return!0;break;default:g}}return!1}function a(a){var b=a.editor;a=a.handlePastedFiles;c("useCometMessengerFileUploadPaste")({editor:b,handlePastedFiles:a,isMimeTypeAcceptable:h});return null}g["default"]=a}),98);
__d("MWOpenMediaManagerUtils",["fbt","I64","LSFactory","LSGenerateTraceId","LSIntEnum","LSMarkSubJobCompletedV2StoredProcedure","MWConsole","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","OfflineThreadingId","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction","justknobx","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function a(a){return(k||(k=b("Promise"))).resolve(d("OfflineThreadingId").createForItemsInOrder(a))}function e(a,e,f,g,j,m,n,o,p,q){j===void 0&&(j=c("emptyFunction"));m===void 0&&(m=c("emptyFunction"));n===void 0&&(n=c("emptyFunction"));var r=function(b,e){e=e.event;if(!e.lengthComputable)return;var f=e.loaded/e.total;c("promiseDone")(a.runInTransaction(function(a){return d("MWPOpenComposerUtils").updateMediaStaging(a,b,function(a){return babelHelpers["extends"]({},a,{progress:f})})},"readwrite"))},s=function(j,o){if(o==null){var p="";if(!c("justknobx")._("899"))return;c("promiseDone")(a.runInTransaction(function(a){return d("MWPOpenComposerUtils").deleteMediaStaging(a,j).then(function(){return l(a,j)}).then(function(){var a=f.find(function(a){return a[1]===j});a!=null&&a[0].type==="application/zip"?(g(h._("__JHASH__Tgh_5naYWqz__JHASH__"),h._("__JHASH__rp1B2ks3qwV__JHASH__")),p="null_fbid_invalid_file_format"):(g(h._("__JHASH__stZga-a6f____JHASH__")),p="null_fbid_other")})},"readwrite"),function(){return n(p,j)});return}c("promiseDone")(a.runInTransaction(function(a){var f=d("MWPOpenComposerUtils").updateMediaStaging(a,j,function(a){return babelHelpers["extends"]({},a,{fbid:(i||(i=d("I64"))).of_float(o),progress:1})}),g=a.table("media_send_jobs").get(j).then(function(f){if(f==null)return(k||(k=b("Promise"))).resolve();var g=c("LSFactory")(a),h=f.offlineThreadingId,l=f.offlineAttachmentId;return c("LSMarkSubJobCompletedV2StoredProcedure")(g,{fbid:(i||(i=d("I64"))).of_float(o),offlineAttachmentId:j}).then(function(){return d("MWPOpenComposerUtils").deleteMediaStaging(a,j)}).then(function(){return d("MWPOpenComposerUtils").updateAttachment(a,e,h,l,function(a){return babelHelpers["extends"]({},a,{attachmentFbid:o.toString()})})}).then(function(){return d("MWPOpenComposerUtils").resumeSendJob(g,h,c("LSGenerateTraceId")())})});return(k||(k=b("Promise"))).all([f,g])},"readwrite"),function(){return m(j)})},t=function(b,e){c("promiseDone")(a.runInTransaction(function(a){return d("MWPOpenComposerUtils").updateMediaStaging(a,b,function(a){return babelHelpers["extends"]({},a,{hasError:!0})}).then(function(){return l(a,b)})},"readwrite"),function(){var a;n((a=e.response.getErrorDescriptionString())!=null?a:"unknown_upload_failure",b)})},u=f.map(function(a){return a[1]}),v=f.map(function(a){return a[0]});return d("MWPComposerMediaUploadUtil").startUpload(j,r,s,t,void 0,v,u,o,p,void 0,q)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield a.table("media_send_jobs").get(b));if(b==null)return;b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("messages").index("optimistic")).getKeyRange(b.offlineThreadingId)));if(b==null)return;b=babelHelpers["extends"]({},b,{sendStatusV2:(j||(j=d("LSIntEnum"))).ofNumber(4)});yield a.table("messages").put(b)});return m.apply(this,arguments)}g.preprocess=a;g.upload=e}),98);
__d("CometFRX.entrypoint",["CometFRXQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.conformed_interface_override,e=a.entryPoint,f=a.id,g=a.location;a=a.responsible_id;return{queries:{frx:{parameters:c("CometFRXQuery$Parameters"),variables:{input:{conformed_interface_override:b,entry_point:e,id:f,location:g,responsible_id:a},scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("CometFRX.react").__setRef("CometFRX.entrypoint")};g["default"]=a}),98);
__d("FRXEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTIVITY_LOG:"activity_log",AGORA_GROUPS:"agora_groups",AGORA_RECENT_NEWS:"agora_recent_news",BLOCK_BUTTON:"block_button",BLOCK_COMPOSER:"block_composer",BUSINESS_NOTIFICATION_MESSAGE_REPORT_BUTTON:"business_notification_message_report_button",CHEVRON_BUTTON:"chevron_button",CHEVRON_TAGS:"chevron_tags",COLLEGES_LIVE_CHAT_REPORT_TO_FB:"colleges_live_chat_report_to_fb",COMMENT:"comment",CONTENT_OVERLAY:"content_overlay",CROWDSOURCING_REPORT:"crowdsourcing_report",DELETE_CONTENT_REPORT:"delete_content_report",DELETE_CONVERSATION_REPORT:"delete_conversation_report",DEVELOPER_FEEDBACK_BUTTON:"developer_feedback_button",EVENTS_REPORTING:"events_reporting",FEEDBACK_BUTTON:"feedback_button",FOX_CHEVRON_TAGS:"fox_chevron_tags",GEMSTONE_MEDIA:"gemstone_media",GEMSTONE_MESSAGING:"gemstone_messaging",GEMSTONE_PROFILE:"gemstone_profile",GROUP_MALL_RELATED_GROUPS_CHAINING:"group_mall_related_groups_chaining",GROUP_MALL_RHC:"group_mall_rhc",GROUPS_ADMIN_FEEDBACK:"groups_admin_feedback",GROUPS_DISCOVER:"groups_discover_page",GROUPS_DISCOVER_HIDE_BUTTON:"groups_discover_hide_button",GROUPS_JOIN_QUESTION:"groups_join_question",GROUPS_LEAVE:"groups_leave",GROUPS_LEAVE_BROWSE:"groups_leave_browse",GROUPS_LEAVE_SPECIAL:"groups_leave_special",GROUPS_PARTICIPATION_QUESTION:"groups_participation_question",GROUPS_PENDING_QUEUE:"groups_pending_queue",GROUPS_POLL:"groups_poll",GROUPS_REPORT:"groups_report",GROUPS_REPORT_LONG_PRESS_TO_ADMIN:"groups_report_long_press_to_admin",GROUPS_REPORT_TO_ADMIN:"groups_report_to_admin",GROUPS_RULE:"groups_rule",GROUPS_TAB_CHAT_ROW:"groups_tab_chat_row",GROUPS_TAB_DISCOVER_FIRST:"groups_tab_discover_first",GROUPS_TRANSPARENCY:"groups_transparency",HATE_CTA:"hate_cta",HELP_NAV_BUTTON:"help_nav_button",HIDE_AD_BUTTON:"hide_ad_button",HIDE_AD_XOUT_BUTTON:"hide_ad_xout_button",IN_PROFILE_MEDIA_SELECTOR:"in_profile_media_selector",INSTANT_GAMES_BOT_FEEDBACK_LINK:"instant_games_bot_feedback_link",LEAVE_CONVERSATION_REPORT:"leave_conversation_report",LOCAL_COMMUNITY_DEMOTE_CONTENT:"local_community_demote_content",LOCAL_COMMUNITY_MOD_HUB_DEMOTE:"local_community_mod_hub_demote",LOCAL_COMMUNITY_POST_REPORT_TO_MOD:"local_community_post_report_to_mod",LOCAL_LIVE_CHAT_REPORT_TO_FB:"local_live_chat_report_to_fb",MARK_AS_SOLD_BUTTON:"mark_as_sold_button",MARK_AS_SUSPICIOUS_BUTTON:"mark_as_suspicious_button",MESSAGE_MEDIA_BUBBLE_REPORT:"message_media_bubble_report",MOBILE_GYSJ:"mobile_gysj",NOTIFICATIONS_JEWEL:"notifications_jewel",PAGE_UNFOLLOW:"page_unfollow",PAGE_UNFOLLOW_CHEVRON:"page_unfollow_chevron",PAGE_UNLIKE:"page_unlike",PAGE_VERIFICATION_BADGE_OPTION:"page_verification_badge_option",PAGE_VERIFICATION_PAGE_OPTION:"page_verification_page_option",POLITICAL_AD_VERIFIED_VOICE:"political_ad_verified_voice",PROACTIVE_WARNING_BANNER:"proactive_warning_banner",PROACTIVE_WARNING_COMPOSER_BLOCK:"proactive_warning_composer_block",PROACTIVE_WARNING_POPOVER:"proactive_warning_popover",PROACTIVE_WARNING_STRAP:"proactive_warning_strap",PROFILE_REPORT_BUTTON:"profile_report_button",PROFILE_REPORT_FLOW:"profile_report_flow",PROFILE_SUBMIT_FEEDBACK:"profile_submit_feedback",QUICK_REPORT_ACTION:"quick_report_action",RELATED_SEARCHES:"related_searches",REPORT_AD_BUTTON:"report_ad_button",REPORT_AD_XOUT_BUTTON:"report_ad_xout_button",REPORT_BUTTON:"report_button",REPORT_BUTTON_DETAILED_FRX:"report_button_detailed_frx",REPORT_FROM_PREVIEW:"report_from_preview",REPORT_JOB_BUTTON:"report_job_button",REPORT_LONG_PRESS:"report_long_press",ROOMS_POST_CALL_HIGH_RATING:"rooms_post_call_high_rating",ROOMS_POST_CALL_LOW_RATING:"rooms_post_call_low_rating",ROOMS_POST_CALL_LOW_RATING_DETAILED:"rooms_post_call_low_rating_detailed",SCHOOL_COMMUNITY_TAGS:"school_community_tags",SEARCH_TYPEAHEAD:"search_typeahead",SNACKBAR:"snackbar",STORY_ATTACHMENT_SHARE:"story_attachment_share",STRUCTURED_REPORT_BUTTON:"structured_report_button",THREADLIST_MENU_REPORT:"threadlist_menu_report",TOMBSTONE:"tombstone",TOOLBAR_REPORT_ACTION:"toolbar_report_action",UNKNOWN:"unknown",UNOWNED_PAGE_ACTION_MENU_REPORT_PAGE:"unowned_page_action_menu_report_page",UPSELL_AFTER_BLOCK_BOTTOM_SHEET:"upsell_after_block_bottom_sheet",USER_CONTROL_MENU:"user_control_menu",WORKPLACE_REPORT_AND_HIDE_BUTTON:"workplace_report_and_hide_button",WORKPLACE_REPORT_BUTTON:"workplace_report_button",WORKROOM_REPORT_BUTTON:"workroom_report_button",X_OUT:"x_out"});f["default"]=a}),66);
__d("MWV2ReportMessageToFBMenuItem.react",["CometFRX.entrypoint","MWXMenuItem.react","react","useMWLSMessageReportingToken","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isSubthread;b=b===void 0?!1:b;var d=a.menuItemLabel,e=a.messageId,f=a.onReportLogger;a=a.threadKey;e=c("useMWLSMessageReportingToken")(e,a);a={entryPoint:"report_long_press",id:e,location:b?"messenger_community_messaging_subthread_view":"messenger_community_messaging_group_thread_details"};var g={};e=a;b=c("useMWXEntryPointDialog")(c("CometFRX.entrypoint"),e);var h=b[0],j=function(){return h(g)};return i.jsx(c("MWXMenuItem.react"),{"aria-label":d,onClick:function(){f&&f(),j()},primaryText:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPinnedMessageState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_PINNED:0,PINNED:1,PINNED_AND_FEATURED:2});f["default"]=a}),66);
__d("useMWTogglePinMessage",["I64","LSFactory","LSOptimisticSetPinnedMessageStoredProcedure","LSPinnedMessageState","MWPActor.react","MWPBumpEntityKey","ServerTime","asyncToGeneratorRuntime","promiseDone","react","requireDeferred","useMWPIsMessagePinned","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback,l=c("requireDeferred")("MWLogMessageAction").__setRef("useMWTogglePinMessage");function a(a,e){var f=(h||(h=c("useReStore")))(),g=c("useMWPIsMessagePinned")(a),j=a.messageId,m=a.threadKey,n=d("ServerTime").getMillis(),o=d("MWPActor.react").useActor(),p=function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield f.runInTransaction(function(b){var h=g?c("LSPinnedMessageState").NOT_PINNED:c("LSPinnedMessageState").PINNED,k=g?"unpin":"pin";e==="message_dot_menu"?l.onReady(function(b){return c("promiseDone")(b.log(f,a.messageId,m,e,k,void 0,void 0,void 0,a.senderId,void 0,o))}):k==="unpin"&&e==="pinned_message_list_dot_menu"&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_pinned_messages","unpin");return c("LSOptimisticSetPinnedMessageStoredProcedure")(c("LSFactory")(b),{messageId:j,pinnedTimestampMs:(i||(i=d("I64"))).of_int32(n),state:i.of_int32(h),threadKey:m})},"readwrite")});return function(){return h.apply(this,arguments)}}();return k(p,[f,g,j,(i||(i=d("I64"))).to_string(m),n])}g["default"]=a}),98);
__d("MWPinnedMessagesDialogNUXFactory.react",["JSResourceForInteraction","MWInboxPersistedUIState","declareNUXRequireable","react","useMWXLazyDialog","useSharedNUX"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useCallback,j=b.useMemo,k=c("JSResourceForInteraction")("MWPinnedMessagesDialogNUX.react").__setRef("MWPinnedMessagesDialogNUXFactory.react");function a(a){return function(b){var e=b.children,f=b.dialogProps;b=c("useSharedNUX")(a);var g=b[0],h=b[1];b=d("MWInboxPersistedUIState").usePersistedUIState(void 0,"__MWSimpleNux."+a+"__");b[0];var l=b[1],m=i(function(){l(void 0),h.onDismiss()},[h,l]),n=j(function(){return{onDismiss:m,pinMessageHandler:f.pinMessageHandler}},[f,m]);b=c("useMWXLazyDialog")(k);var o=b[0];b=function(){return o(n)};return g?e(b):e(f.pinMessageHandler)}}e=c("declareNUXRequireable")(a);g["default"]=e}),98);
__d("MlsMessageActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1401");b=d("FalcoLoggerInternal").create("mls_message_action",a);e=b;g["default"]=e}),98);
__d("MWLogMessageAction",["I64","MWLSContactTypeExactUtils","MlsMessageActionFalcoEvent","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d,e,f,g,h,j,k,l){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,j,k,l,m,n){var o,p=(yield (o=d("ReQL")).firstAsync(o.fromTableAscending(a.table("threads")).getKeyRange(e))),q=(yield o.toArrayAsync(o.fromTableAscending(a.table("participants")).getKeyRange(e))),r=(yield o.firstAsync(o.mergeJoin(o.fromTableAscending(a.table("participants")).getKeyRange(e),o.fromTableAscending(a.table("contacts"))).filter(function(a){a[0];a=a[1].contactTypeExact;return d("MWLSContactTypeExactUtils").isIgContact(a)})))!=null;p!=null&&c("MlsMessageActionFalcoEvent").log(function(){var a;return{action:g,browser_window_height:window.innerHeight,browser_window_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,error_text:j,extra:i,group_size:String(q.length),is_xac_thread:r,ls_thread_type:(h||(h=d("I64"))).to_int32(p.threadType),message_type:(a=m)!=null?a:"text",mid:b,reaction:k,recipient_id:l!=null?(h||(h=d("I64"))).to_string(l):void 0,sender_id:h.to_string(n),source:f,thread_id:h.to_string(e)}})});return i.apply(this,arguments)}g.log=a}),98);
__d("ZenonUserActionLoggerCommon",["cr:11085"],(function(a,b,c,d,e,f,g){"use strict";g.logClick=b("cr:11085").logClick,g.logImpression=b("cr:11085").logImpression}),98);
__d("LsMessageClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743853");b=d("FalcoLoggerInternal").create("ls_message_click",a);e=b;g["default"]=e}),98);
__d("MessageThreadEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5034");b=d("FalcoLoggerInternal").create("message_thread_events",a);e=b;g["default"]=e}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4148");b=d("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",a);e=b;g["default"]=e}),98);
__d("MessengerDiscoverableChatClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1254");b=d("FalcoLoggerInternal").create("messenger_discoverable_chat_client_events",a);e=b;g["default"]=e}),98);