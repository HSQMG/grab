;/*FB_PKG_DELIM*/

__d("LSGetFirstAvailableAdminMessageCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(a){return b.seq([function(a){return b.db.table(27).fetchDesc([[[]],"ctaId"]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSApplyAdminMessageCTA",["LSGetFirstAvailableAdminMessageCTAID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(e){return c.seq([function(a){return c.sp(b("LSGetFirstAvailableAdminMessageCTAID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(27).put({threadKey:a[0],messageId:a[2],ctaId:d[0],timestampMs:a[1],adClientToken:a[5],adPreferenceUrl:a[6],adHelpUrl:a[7],showAdChoiceIcon:a[8],title:a[3],actionUrl:a[9],adminMessageNicknameParticipantId:a[10],targetId:a[11],targetTitle:a[12]})},function(b){return c.fe(c.ftr(c.db.table(12).fetch([[[a[0],a[1],a[2]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.timestampMs,a[1])&&b.messageId===a[2]}),function(b){var c=b.update;b.item;return c({adminMsgCtaId:d[0],adminMsgCtaTitle:a[3],adminMsgCtaType:a[4]})})}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSUpdateExtraAttachmentColumns",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(16).fetch([[[a[0],a[2],a[3]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),a[1])&&c.messageId===a[2]&&c.attachmentFbid===a[3]}),function(b){var c=b.update;b.item;return c({listItemAccessibilityText1:a[4],listItemAccessibilityText2:a[5],listItemAccessibilityText3:a[6],subtitleIconUrl:a[17],attachmentLoggingType:a[18],preheaderText:a[19],shouldAutoplayVideo:a[20],previewUrlLarge:a[21],previewWidthLarge:a[24],previewHeightLarge:a[25],avatarViewUrlList:a[10],avatarViewUrlExpirationTimestampList:a[11],avatarViewUrlFallbackList:a[12],avatarViewTitleList:a[13],avatarViewSize:a[14],avatarCount:a[15],avatarViewContextText:a[16]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);